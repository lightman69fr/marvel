var AjaxHome=function(e){this.methode=!1,this.page=!1,this.data=!1,this.headers=!1,this.useCallback=!1,this.withLoader=!1,this.xhr=!1,isDefined(e)&&isObject(e)?(e.hasOwnProperty("methode")?this.methode=e.methode:this.methode="POST",e.hasOwnProperty("page")&&(e.page.length>2?this.page=e.page:(this.page=!1,alert("La page est manquante"))),e.hasOwnProperty("data")&&(this.data=e.data),e.hasOwnProperty("headers")&&(Array.isArray(e.headers)?this.headers=e.headers:this.headers=!1),e.hasOwnProperty("callback")&&(isFunction(e.callback)?this.useCallback=e.callback:this.useCallback=!1),e.hasOwnProperty("withLoader")&&(isFunction(e.withLoader)?this.withLoader=e.withLoader:this.withLoader=!1),this.methode!==!1&&this.page!==!1&&(this.xhr=this.createXHR(),this.SendPage())):alert("Vous devez définir les paramètres pour Ajax")};AjaxHome.prototype={createXHR:function(){var e=!1;return window.XDomainRequest?e=new XDomainRequest:window.XMLHttpRequest?e=new XMLHttpRequest:alert("Votre navigateur ne gère pas l'AJAX cross-domain !"),e},SendPage:function(){var e=this;if(this.methode!==!1&&this.page!==!1){var a=this.methode,r=this.page;if(this.data!==!1)var t=this.generateUrlParams();else t=null;var i=this.useCallback,s=this.xhr;if(s.onload=function(){200==s.status&&(isFunction(i)?i(s.responseText):(console.log("Réponse brute :"),console.log(s.responseText)))},s.onprogress=function(){if(!isBoolean(e.withLoader)){var a=e.withLoader;a()}},s.open(a,r,!0),Array.isArray(this.headers))for(var n=this.headers,o=0;o<n.length;o++){var l=n[o];this.addHeader(l)}s.send(t)}},addHeader:function(e){var a=this.xhr;isDefined(a)?isObject(e)&&a.setRequestHeader(e.titre,e.valeur):alert("xhrLink non disponible")},generateUrlParams:function(){function s(e){var a="",r=sizeOf(e),t=0;for(var i in e){var s=e[i];"function"!=typeof s&&(s.toString().length>0&&"formDocument"!=i&&(a=a+i+"="+s,r-1>t&&(a+="&")),t++)}return a}var e=this.data,a="";if(Array.isArray(e))for(var r=e.length,t=0;r>t;t++){var i=e[t];a+=s(i)}else isObject(e)&&(a=s(e));return a}};